local/adapt/chain/tuning/run_tdnn_20k_semisupervised_weighted_tf_1a.sh --mic ihm --supervised-set train_sup --unsupervised-set train_unsup_86k --sup-chain-dir exp/ihm/semisup_20k/chain_semi20k_80k/tdnn_1b_sp_bi --sup-lat-dir exp/ihm/semisup_20k/chain_semi20k_80k/tri3_train_sup_sp_comb_lats --sup-tree-dir exp/ihm/semisup_20k/chain_semi20k_80k/tree_bi_a --ivector-root-dir exp/ihm/semisup_20k/nnet3_semi20k_80k --chain-affix _semi20k_80k --data-root data/ihm/semisup --exp-root exp/ihm/transfer_20k --stage 15

ark,s,cs:apply-cmvn --utt2spk=ark:data/ihm/semisup/train_sup_sp_comb/split30/1/utt2spk scp:data/ihm/semisup/train_sup_sp_comb/split30/1/cmvn.scp scp:data/ihm/semisup/train_sup_sp_comb/split30/1/feats.scp ark:- | splice-feats --left-context=3 --right-context=3 ark:- ark:- | transform-feats exp/ihm/semisup_20k/chain_semi20k_80k/tree_bi_a/final.mat ark:- ark:- | subsample-feats --n=3 ark:- ark:- |

apply-cmvn  --utt2spk=ark:data/ihm/semisup/train_sup_sp_comb/split30/1/utt2spk scp:data/ihm/semisup/train_sup_sp_comb/split30/1/cmvn.scp scp:data/ihm/semisup/train_sup_sp_comb/split30/1/feats.scp ark:- | splice-feats --left-context=3 --right-context=3 ark:- ark:- | transform-feats exp/ihm/semisup_20k/tri3_ali_train_sup_sp_comb/final.mat ark:- ark:-